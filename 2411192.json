[{"bookSourceComment": "免网页验证，可选国内专线：\nhttps://www.banzhu99999.com\nbanzhu22222.com\n发布页：\nhttp://diyibanzhu.app\nhttp://diyibanzhu.net\n \n本次处理多余无用规则，更换正文规则，原来沿用的是任尚仁大佬的正文规则，看不懂\n    js模板来自版主178或永远的神，用的版主444免验证专线，简化发现和大量规则", "bookSourceGroup": "", "bookSourceName": "📪第一版主", "bookSourceType": 0, "bookSourceUrl": "https://www.diyibanzhu444444.com/##", "bookUrlPattern": "", "concurrentRate": "", "customOrder": -48, "enabled": true, "enabledCookieJar": true, "enabledExplore": true, "exploreUrl": "[{\"title\":\"全部\",\"url\":\"/shuku/0-lastupdate-0-{{page}}.html\",\"style\":{\"layout_flexBasisPercent\":0.25,\"layout_flexGrow\":1}},\n{\"title\":\"连载中\",\"url\":\"/shuku/0-lastupdate-1-{{page}}.html\",\"style\":{\"layout_flexBasisPercent\":0.25,\"layout_flexGrow\":1}},\n{\"title\":\"已完本\",\"url\":\"/shuku/0-lastupdate-2-{{page}}.html\",\"style\":{\"layout_flexBasisPercent\":0.25,\"layout_flexGrow\":1}},\n{\"title\":\"总人气\",\"url\":\"/shuku/0-allvisit-0-{{page}}.html\",\"style\":{\"layout_flexBasisPercent\":0.25,\"layout_flexGrow\":1}},\n{\"title\":\"月人气\",\"url\":\"/shuku/0-monthvisit-0-{{page}}.html\",\"style\":{\"layout_flexBasisPercent\":0.25,\"layout_flexGrow\":1}},\n{\"title\":\"字数\",\"url\":\"/shuku/0-size-0-{{page}}.html\",\"style\":{\"layout_flexBasisPercent\":0.25,\"layout_flexGrow\":1}},\n{\"title\":\"新书\",\"url\":\"/shuku/0-postdate-0-{{page}}.html\",\"style\":{\"layout_flexBasisPercent\":0.25,\"layout_flexGrow\":1}},\n{\"title\":\"玄幻奇幻\",\"url\":\"/shuku/1-lastupdate-0-{{page}}.html\",\"style\":{\"layout_flexBasisPercent\":0.25,\"layout_flexGrow\":1}},\n{\"title\":\"武侠仙侠\",\"url\":\"/shuku/2-lastupdate-0-{{page}}.html\",\"style\":{\"layout_flexBasisPercent\":0.25,\"layout_flexGrow\":1}},\n{\"title\":\"都市言情\",\"url\":\"/shuku/3-lastupdate-0-{{page}}.html\",\"style\":{\"layout_flexBasisPercent\":0.25,\"layout_flexGrow\":1}},\n{\"title\":\"穿越历史\",\"url\":\"/shuku/4-lastupdate-0-{{page}}.html\",\"style\":{\"layout_flexBasisPercent\":0.25,\"layout_flexGrow\":1}},\n{\"title\":\"科幻灵异\",\"url\":\"/shuku/5-lastupdate-0-{{page}}.html\",\"style\":{\"layout_flexBasisPercent\":0.25,\"layout_flexGrow\":1}},\n{\"title\":\"藏经阁\",\"url\":\"/shuku/6-lastupdate-0-{{page}}.html\",\"style\":{\"layout_flexBasisPercent\":0.25,\"layout_flexGrow\":1}},\n{\"title\":\"其他类别\",\"url\":\"/shuku/7-lastupdate-0-{{page}}.html\",\"style\":{\"layout_flexBasisPercent\":0.25,\"layout_flexGrow\":1}},\n{\"title\":\" \",\"url\":\" \",\"style\":{\"layout_flexBasisPercent\":0.25,\"layout_flexGrow\":1}}]", "header": "{\"User-Agent\": \"Mozilla/5.0 (Linux; U; Android 8.1.0; zh-CN; MI 8 Lite Build/OPM1.171019.019) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/78.0.3904.108 UCBrowser/13.2.0.1100 Mobile Safari/537.36\"}", "lastUpdateTime": 1731732366690, "loginCheckJs": "", "loginUi": "", "loginUrl": "", "respondTime": 180000, "ruleBookInfo": {"author": "", "coverUrl": "", "init": "", "intro": ".bd.2@text", "kind": "", "lastChapter": "ul.list.0@li.0@text", "name": "h1@text", "wordCount": ""}, "ruleContent": {"content": "<js>\nfunction x(a, b) {\n    result = String(result).replace(a, b);\n}\n//debug\nfunction d(debug) {\n    java.log(debug);\n    java.log(result);\n}\n\n//同时加载多章时，自动验证成功后有的页面加载失败时重新获取\nif(/<div\\s*class=\"title\"\\s*>.*1234/.test(src)){\n    //重新设置正文解析内容\n    java.setContent(java.ajax(baseUrl));\n}\n\n//获取正文内容\nresult = java.getString('.page-content@tag.p.0@html');\n\n//ci修改\nresultFirst = java.getString('.neirong@html');\n\n//大概第四页正文有切割，需要调接口获取这一页剩余正文\nif (/\\$.post\\('',{'j':'1'}/.test(src)) {\n    result += java.ajax(String(baseUrl + ',' + JSON.stringify({\n        \"method\": \"POST\",\n        \"body\": \"j=1\"\n    })))\n}\n\n//d(\"正文\"+baseUrl)\n\n//有问题修改下面正则 两个br标签换行显示\nx(/((\\s*)<br>\\n?){2}/g,\"<br><br>\");\n//d('1.0:')\nx(/<script.*<\\/script>/g,\"\");\n\ntry {\n    // Aes解密\n    secret = src.match(/=\\s*secret\\(\\s*['\"](.+?)['\"],[\\s]*['\"](.+?)['\"],[^);]*?/);\n    string = secret[1]\n    code = java.md5Encode(secret[2]);\n    iv = code.substring(0, 16);\n    key = code.substring(16);\n    //java.log(baseUrl + \" Aes解密ok：\" + code + \"\\n\" + iv + \"\\n\" + key)\n    result = java.createSymmetricCrypto(\"AES/CBC/PKCS7Padding\", key, iv).decryptStr(string);\n} catch (err) {\n    try {\n        // 乱序恢复\n        ns = java.base64Decode(src.match(/var ns='(.+?)';/)[1]).split(',');\n        //java.log(baseUrl + \"乱序恢复ok\")\n        paragraphArr = result.split('<br><br>');\n        result = \"\";\n        for (i = 1; i <= paragraphArr.length; i++) {\n            result += paragraphArr[ns[i] - ns[0]] + '<br><br>';\n        }\n    } catch (err) {\n        //java.log(baseUrl + \"乱序恢复Aes解密no\")\n    }\n}\n\n//初始化图片链接\nx(/(<img\\s+)data\\-cfsrc=\"[^\"]+\"/g,\"$1\");\nx(/[\\r\\n]?[\\t ]*< img .+?toimg\\/data\\/([^\\.]+)[^>]+>[\\t ]*[\\r\\n]?/g, \"#$1#\");\n\n//初始化字体格式的文字,匹配<i>&#xe800</i>\nx(/<i>(.*?)<\\/i>/g, function(str, p1) {\n    //java.log(p1.charCodeAt().toString(16));\n    //返回16进制，例：p1=&#xe800 返回格式#e800#\n    return '#' + p1.charCodeAt().toString(16) + '#'\n})\n//d('2.0:')\n\n//转换空格\nx(/&nbsp;/g, ' ');\n//初始化分段准备\nx(/[\\t  ]{2,2}/g, \"　\");\n\n//去掉标签里的属性\nx(/(\\<|&lt;)([^\\>]*?)(\\s|&nbsp;)[^\\>]*(\\>|&gt;)/g, \"<$2>\");\n//d('2.1:')\n//段落换行\nx(/\\s*(\\n|<br\\/?>)+\\s*(　{2,})?/gi, \"\\r\\n\");\n//d('3.0:')\n//去掉不需要的标签\nx(/([\\r\\n　]*\\<\\/?([A-Za-z]*)?\\>[\\r\\n　]*)/gi, \"\");\n\n//引号替换\nx(/‘/g, \"『\");\nx(/’/g, \"』\");\nx(/“/g, \"「\");\nx(/”/g, \"」\");\n\nif (/(Undefined|(^\\s*$))/.test(result)) {\n    //ci\n    if (/(Undefined|(^\\s*$))/.test(resultFirst)) {\n        result =\n            \"<br/>　　网站分页有时有问题不可用，速度慢的时候就会是现在这样了，网站速度快的时候就没事了。<br/>　　换个时间刷新试试！！！<br/>　　换个时间刷新试试！！！<br/>　　换个时间刷新试试！！！<br/>\" + result;\n    }else{\n        result = resultFirst\n    }\n}\n\n//d(\"正文\"+baseUrl)\n\"\" + result;\n</js>", "imageStyle": "", "nextContentUrl": "class.chapterPages.0@a[!0]@href", "replaceRegex": ""}, "ruleExplore": {"author": "", "bookList": "", "bookUrl": "", "coverUrl": "", "intro": "", "kind": "", "lastChapter": "", "name": "", "wordCount": ""}, "ruleSearch": {"author": ".info.0@text##\\s+字数：.*", "bookList": ".column-2 ", "bookUrl": ".name@href", "checkKeyWord": "", "coverUrl": "@js:'http://m.diyibanzhu.quest/images/jipin-default.jpg'", "intro": "", "kind": "span.0@text&&p.info.1@text##更新：", "lastChapter": ".update@a@text", "name": ".name@text", "wordCount": ".info@span@text##字数："}, "ruleToc": {"chapterList": ".chapter-list.1@li", "chapterName": "a@text", "chapterUrl": "a@href", "nextTocUrl": "text.下页@href"}, "searchUrl": "/s.php,{\n\"charset\": \"gbk\",\n\"method\":\"post\",\n\"body\":\"objectType=2&type=articlename&s={{key}}\"\n}", "weight": 0}]
