[
  {
    "bookSourceComment": "版本: 20241122[Server]\n作者: 梓澄qwq(@helloplhm-qwq)\n更新日志: \n    1. fix: 修复ajax获取请求头递归",
    "bookSourceGroup": "菠萝包轻小说,API,优质",
    "bookSourceName": "🌟菠萝包轻小说APP",
    "bookSourceType": 0,
    "bookSourceUrl": "https://api.sfacg.com#APP",
    "bookUrlPattern": "https?://(book|m|apiIminipapi).sfacg\\.com/.*\\d{6,9}.*",
    "customOrder": -92803,
    "enabled": true,
    "enabledCookieJar": true,
    "enabledExplore": true,
    "exploreUrl": "<js> \njava.toast(\"正在进行发现页热更新...\")\n\n\nvar oArr = [\n  {\n    \"title\": \"我的书架\",\n    \"url\": \"/user/Pockets?expand=novels,albums,comics,typeName,tags,intro,latestchapter,discount,discountExpireDate,latestchapter,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 1,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"每日新书推荐\",\n    \"url\": \"/novels/specialpushs?pushNames=newpush&page=0&size=10&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 1,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"今日更新\",\n    \"url\": \"/workentities?page={{page - 1}}&size=20&expand=authorName,typeName,sysTags,intro,discount,discountExpireDate,tags,latestchapter\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.4,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"今日更新（签约/会员）\",\n    \"url\": \"/novels?page={{page - 1}}&size=20&filter=latest-signnvip&expand=typeName,sysTags,intro,discount,discountExpireDate,intro,latestchapter\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.5,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"====== 最近更新 ======\",\n    \"url\": \"/novels/0/sysTags/novels?sort=latest&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 1,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"魔幻\",\n    \"url\": \"/novels/21/sysTags/novels?sort=latest&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"玄幻\",\n    \"url\": \"/novels/22/sysTags/novels?sort=latest&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"古风\",\n    \"url\": \"/novels/23/sysTags/novels?sort=latest&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"科幻\",\n    \"url\": \"/novels/24/sysTags/novels?sort=latest&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"校园\",\n    \"url\": \"/novels/25/sysTags/novels?sort=latest&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"都市\",\n    \"url\": \"/novels/26/sysTags/novels?sort=latest&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"游戏\",\n    \"url\": \"/novels/27/sysTags/novels?sort=latest&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"悬疑\",\n    \"url\": \"/novels/28/sysTags/novels?sort=latest&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"====== 人气最高 ======\",\n    \"url\": \"/novels/0/sysTags/novels?sort=viewtimes&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 1,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"魔幻\",\n    \"url\": \"/novels/21/sysTags/novels?sort=viewtimes&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"玄幻\",\n    \"url\": \"/novels/22/sysTags/novels?sort=viewtimes&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"古风\",\n    \"url\": \"/novels/23/sysTags/novels?sort=viewtimes&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"科幻\",\n    \"url\": \"/novels/24/sysTags/novels?sort=viewtimes&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"校园\",\n    \"url\": \"/novels/25/sysTags/novels?sort=viewtimes&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"都市\",\n    \"url\": \"/novels/26/sysTags/novels?sort=viewtimes&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"游戏\",\n    \"url\": \"/novels/27/sysTags/novels?sort=viewtimes&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"悬疑\",\n    \"url\": \"/novels/28/sysTags/novels?sort=viewtimes&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"====== 收藏最高 ======\",\n    \"url\": \"/novels/0/sysTags/novels?sort=bookmark&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 1,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"魔幻\",\n    \"url\": \"/novels/21/sysTags/novels?sort=bookmark&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"玄幻\",\n    \"url\": \"/novels/22/sysTags/novels?sort=bookmark&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"古风\",\n    \"url\": \"/novels/23/sysTags/novels?sort=bookmark&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"科幻\",\n    \"url\": \"/novels/24/sysTags/novels?sort=bookmark&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"校园\",\n    \"url\": \"/novels/25/sysTags/novels?sort=bookmark&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"都市\",\n    \"url\": \"/novels/26/sysTags/novels?sort=bookmark&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"游戏\",\n    \"url\": \"/novels/27/sysTags/novels?sort=bookmark&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"悬疑\",\n    \"url\": \"/novels/28/sysTags/novels?sort=bookmark&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"====== 月票最多 ======\",\n    \"url\": \"/novels/0/sysTags/novels?sort=ticket&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 1,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"魔幻\",\n    \"url\": \"/novels/21/sysTags/novels?sort=ticket&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"玄幻\",\n    \"url\": \"/novels/22/sysTags/novels?sort=ticket&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"古风\",\n    \"url\": \"/novels/23/sysTags/novels?sort=ticket&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"科幻\",\n    \"url\": \"/novels/24/sysTags/novels?sort=ticket&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"校园\",\n    \"url\": \"/novels/25/sysTags/novels?sort=ticket&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"都市\",\n    \"url\": \"/novels/26/sysTags/novels?sort=ticket&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"游戏\",\n    \"url\": \"/novels/27/sysTags/novels?sort=ticket&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"悬疑\",\n    \"url\": \"/novels/28/sysTags/novels?sort=ticket&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"====== 更新最多 ======\",\n    \"url\": \"/novels/0/sysTags/novels?sort=charcount&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 1,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"魔幻\",\n    \"url\": \"/novels/21/sysTags/novels?sort=charcount&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"玄幻\",\n    \"url\": \"/novels/22/sysTags/novels?sort=charcount&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"古风\",\n    \"url\": \"/novels/23/sysTags/novels?sort=charcount&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"科幻\",\n    \"url\": \"/novels/24/sysTags/novels?sort=charcount&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"校园\",\n    \"url\": \"/novels/25/sysTags/novels?sort=charcount&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"都市\",\n    \"url\": \"/novels/26/sysTags/novels?sort=charcount&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"游戏\",\n    \"url\": \"/novels/27/sysTags/novels?sort=charcount&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"悬疑\",\n    \"url\": \"/novels/28/sysTags/novels?sort=charcount&systagids=&isfree=both&isfinish=both&updatedays=-1&charcountbegin=0&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"====== 精选专区 ======\",\n    \"url\": \"\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 1,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"重点推荐作品\",\n    \"url\": \"/novels?filter=viphotpush&charcountend=0&page=0&size=8&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.25,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"完结作品推荐\",\n    \"url\": \"/novels?filter=finishpush&charcountend=0&page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.25,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"本期热销新书\",\n    \"url\": \"/novels?size=8&filter=vipnewpush&charcountend=0&page=0&size=8&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.25,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"====== 排行榜 ======\",\n    \"url\": \"\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 1,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"人气榜\",\n    \"url\": \"/ranks/week/novels?page=0&size=50&rtype=view&ntype=origin&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"畅销榜\",\n    \"url\": \"/ranks/week/novels?page=0&size=50&rtype=sale&ntype=origin&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"新书榜\",\n    \"url\": \"/ranks/week/novels?page=0&size=50&rtype=newhit&ntype=origin&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"收藏榜\",\n    \"url\": \"/ranks/week/novels?page=0&size=50&rtype=mark&ntype=origin&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"月票榜\",\n    \"url\": \"/ranks/week/novels?page=0&size=50&rtype=ticket&ntype=origin&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"打赏榜\",\n    \"url\": \"/ranks/week/novels?page=0&size=50&rtype=bonus&ntype=origin&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"种草榜\",\n    \"url\": \"/ranks/week/novels?page=0&size=50&rtype=recommend&ntype=origin&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n  {\n    \"title\": \"占位\",\n    \"url\": \"\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 0.2,\n      \"layout_flexGrow\": 1\n    }\n  },\n]\n\ntry {\n  var hotUpdateUrl = 'https://api.sfacg.com/novels/0/sysTags?categoryId=0'\n  var hotUpdate = java.ajax(hotUpdateUrl + JSON.stringify({\n    method: 'GET'\n  }))\n\n  // hot update example\n  // {\"status\":{\"httpCode\":200,\"errorCode\":200,\"msgType\":0,\"msg\":null},\"data\":[{\"sysTagId\":10,\"refferTimes\":170519,\"tagName\":\"战斗\",\"imageUrl\":\" https://rssyn.sfacg.com/web/systag/images/202104/09/f2448e68-7f81-4fb4-bb62-e5a77dc5b522.jpg\",\"novelCount\":170519,\"isDefault\":false,\"linkUrl\":null,\"introUrl\":null}]}\n\n  if (JSON.parse(hotUpdate).status.httpCode == 200) {\n    var hotUpdateData = JSON.parse(hotUpdate)\n    oArr.push({\n      \"title\": \"热门标签 - 最近更新\",\n      \"url\": \"\",\n      \"style\": {\n        \"layout_flexBasisPercent\": 1,\n        \"layout_flexGrow\": 1\n      }\n    })\n    hotUpdateData = hotUpdateData.data\n    var cArr = []\n    hotUpdateData.forEach((i) => {\n      cArr.push({\n        \"title\": i.tagName,\n        \"url\": `/novels/0/sysTags/${i.sysTagId}/novels?page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags&sort=latest`,\n        \"style\": {\n          \"layout_flexBasisPercent\": 0.4,\n          \"layout_flexGrow\": 1\n        }\n      })\n    })\n    if (cArr.length % 2 != 0) {\n        cArr.push({\n          \"title\": \"占位\",\n          \"url\": \"\",\n          \"style\": {\n            \"layout_flexBasisPercent\": 0.4,\n            \"layout_flexGrow\": 1\n          }\n        })\n    }\n    oArr = oArr.concat(cArr)\n    oArr.push({\n      \"title\": \"热门标签 - 人气最高\",\n      \"url\": \"\",\n      \"style\": {\n        \"layout_flexBasisPercent\": 1,\n        \"layout_flexGrow\": 1\n      }\n    })\n    cArr = []\n    hotUpdateData.forEach((i) => {\n      cArr.push({\n        \"title\": i.tagName,\n        \"url\": `/novels/0/sysTags/${i.sysTagId}/novels?page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags&sort=viewtimes`,\n        \"style\": {\n          \"layout_flexBasisPercent\": 0.4,\n          \"layout_flexGrow\": 1\n        }\n      })\n    })\n    if (cArr.length % 2 != 0) {\n      cArr.push({\n        \"title\": \"占位\",\n        \"url\": \"\",\n        \"style\": {\n          \"layout_flexBasisPercent\": 0.4,\n          \"layout_flexGrow\": 1\n        }\n      })\n    }\n    oArr = oArr.concat(cArr)\n    cArr = []\n    oArr.push({\n      \"title\": \"热门标签 - 收藏最高\",\n      \"url\": \"\",\n      \"style\": {\n        \"layout_flexBasisPercent\": 1,\n        \"layout_flexGrow\": 1\n      }\n    })\n    hotUpdateData.forEach((i) => {\n      cArr.push({\n        \"title\": i.tagName,\n        \"url\": `/novels/0/sysTags/${i.sysTagId}/novels?page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags&sort=bookmark`,\n        \"style\": {\n          \"layout_flexBasisPercent\": 0.4,\n          \"layout_flexGrow\": 1\n        }\n      })\n    })\n    if (cArr.length % 2 != 0) {\n      cArr.push({\n        \"title\": \"占位\",\n        \"url\": \"\",\n        \"style\": {\n          \"layout_flexBasisPercent\": 0.4,\n          \"layout_flexGrow\": 1\n        }\n      })\n    }\n    oArr = oArr.concat(cArr)\n    cArr = []\n    oArr.push({\n      \"title\": \"热门标签 - 月票最多\",\n      \"url\": \"\",\n      \"style\": {\n        \"layout_flexBasisPercent\": 1,\n        \"layout_flexGrow\": 1\n      }\n    })\n    hotUpdateData.forEach((i) => {\n      cArr.push({\n        \"title\": i.tagName,\n        \"url\": `/novels/0/sysTags/${i.sysTagId}/novels?page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags&sort=ticket`,\n        \"style\": {\n          \"layout_flexBasisPercent\": 0.4,\n          \"layout_flexGrow\": 1\n        }\n      })\n    })\n    if ((cArr.length % 2) != 0) {\n      cArr.push({\n        \"title\": \"占位\",\n        \"url\": \"\",\n        \"style\": {\n          \"layout_flexBasisPercent\": 0.4,\n          \"layout_flexGrow\": 1\n        }\n      })\n    }\n    oArr = oArr.concat(cArr)\n    cArr = []\n    oArr.push({\n      \"title\": \"热门标签 - 更新最多\",\n      \"url\": \"\",\n      \"style\": {\n        \"layout_flexBasisPercent\": 1,\n        \"layout_flexGrow\": 1\n      }\n    })\n    hotUpdateData.forEach((i) => {\n      cArr.push({\n        \"title\": i.tagName,\n        \"url\": `/novels/0/sysTags/${i.sysTagId}/novels?page={{page - 1}}&size=20&expand=typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags&sort=charcount`,\n        \"style\": {\n          \"layout_flexBasisPercent\": 0.4,\n          \"layout_flexGrow\": 1\n        }\n      })\n    })\n    if (cArr.length % 2 != 0) {\n      cArr.push({\n        \"title\": \"占位\",\n        \"url\": \"\",\n        \"style\": {\n          \"layout_flexBasisPercent\": 0.4,\n          \"layout_flexGrow\": 1\n        }\n      })\n    }\n    oArr = oArr.concat(cArr)\n  }\n  java.toast(\"发现列表热更新成功\")\n} catch (e) {\n  java.toast(\"发现列表热更新失败\\n\" + e)\n}\nvar o = JSON.stringify(oArr)\no\n</js>",
    "header": "<js>\nfunction md5ToUuid(md5String) {\n  const uuid = md5String.substr(0, 8) + '-' +\n               md5String.substr(8, 4) + '-' +\n               md5String.substr(12, 4) + '-' +\n               md5String.substr(16, 4) + '-' +\n               md5String.substr(20);\n  return uuid;\n}\n// java.log(baseUrl)\nvar cookie = source.getLoginHeader() || \"\"\nvar uuid = java.randomUUID().toString().toUpperCase()\nvar deviceUUID = md5ToUuid(java.md5Encode(java.androidId())).toString().toString().toUpperCase()\njava.log(deviceUUID)\nvar time = Date.now()\nvar security = JSON.parse(sendGetRequest(`https://ikun.laoguantx.top:45554/sfapi/sign?uuid=${uuid}&time=${time}&deviceuuid=${deviceUUID}`)).data\nvar header = {\n\tcookie: cookie,\n  \"user-agent\": `boluobao/5.0.60(android;29)/H5/${deviceUUID.toLowerCase()}/H5`,\n  sfsecurity: `nonce=${uuid}&timestamp=${time}&devicetoken=${deviceUUID}&sign=${security}`,\n  authorization: \"Basic YW5kcm9pZHVzZXI6MWEjJDUxLXl0Njk7KkFjdkBxeHE=\",\n  accept: \"application/vnd.sfacg.api+json;version=1\"\n}\nJSON.stringify(header)\n</js>",
    "jsLib": "var okhttpImport = new JavaImporter();\nokhttpImport.importPackage(Packages.okhttp3);\n\nwith (okhttpImport) {\n\tclient = new OkHttpClient();\n  function sendPutRequest(url, jsonBody, headers) {\n    var mediaType = MediaType.parse(\"application/json; charset=utf-8\");\n    var requestBody = RequestBody.create(jsonBody, mediaType);\n\n    var requestBuilder = new Request.Builder()\n      .url(url)\n      .put(requestBody);\n\n    // 添加统一的请求头\n    for (var headerName in headers) {\n      requestBuilder.addHeader(headerName, headers[headerName]);\n    }\n\n    var request = requestBuilder.build();\n\n    var response = client.newCall(request).execute();\n\n    try {\n      if (!response.isSuccessful()) {\n        java.toast(\"请求失败: \" + response.code() + \" \" + response.message());\n      }\n\n      // 处理响应\n      var responseBody = response.body().string();\n      return responseBody;\n    } finally {\n      response.close();\n    }\n  }\n  function sendGetRequest(url, headers) {\n    if (typeof headers === 'undefined') {\n      headers = {}\n    }\n\n    // var mediaType = MediaType.parse(\"application/json; charset=utf-8\");\n    // var requestBody = RequestBody.create(jsonBody, mediaType);\n\n    var requestBuilder = new Request.Builder()\n      .url(url)\n      .get();\n\n    // 添加统一的请求头\n    for (var headerName in headers) {\n      requestBuilder.addHeader(headerName, headers[headerName]);\n    }\n\n    var request = requestBuilder.build();\n\n    var response = client.newCall(request).execute();\n\n    try {/*\n      if (!response.isSuccessful()) {\n        java.toast(\"请求失败: \" + response.code() + \" \" + response.message());\n      }*/\n\n      // 处理响应\n      var responseBody = response.body().string();\n      return responseBody;\n    } finally {\n      response.close();\n    }\n  }\n  function sendPostRequest(url, jsonBody, headers) {\n    if (typeof headers === 'undefined') {\n      headers = {}\n    }\n\n    // var client = new OkHttpClient();\n\n  if (typeof jsonBody === 'object') {\n    jsonBody = JSON.stringify(jsonBody)\n  \t}\n\n    var mediaType = MediaType.parse(\"application/x-www-form-urlencoded; charset=utf-8\");\n    var requestBody = RequestBody.create(jsonBody, mediaType);\n\n    var requestBuilder = new Request.Builder()\n      .url(url)\n      .post(requestBody);\n\n    // 添加统一的请求头\n    for (var headerName in headers) {\n      requestBuilder.addHeader(headerName, headers[headerName]);\n    }\n\n    var request = requestBuilder.build();\n\n    var response = client.newCall(request).execute();\n\n    try {\n      /*\n      if (!response.isSuccessful()) {\n        java.toast(\"请求失败: \" + response.code() + \" \" + response.message());\n      }*/\n\n      // 处理响应\n      var responseBody = response.body().string();\n      return responseBody;\n    } finally {\n      response.close();\n    }\n  }\n}",
    "lastUpdateTime": 1732206272459,
    "loginCheckJs": "",
    "loginUi": "[\n  {\n    name: \"账号\",\n    type: \"text\"\n  },\n  {\n    name: \"密码\",\n    type: \"password\"\n  },\n  {\n    name: \"没有账号？去注册\",\n    type: \"button\",\n    action: \"https://passport.sfacg.com/Register.aspx\"\n  },\n  {\n    name: \"点击充值火券\",\n    type: \"button\",\n    action: \"https://pay.sfacg.com/\"\n  },\n  {\n  \t  name: \"点击签到\",\n  \t  type: \"button\",\n  \t  action: \"checkin()\"\n  \t},\n  \t{\n  \t  name: \"点击观看广告（可能不可用）\",\n  \t  type: \"button\",\n  \t  action: \"fakead()\"\n  \t}\n]",
    "loginUrl": "<js>\nfunction getRequestHeader() {\n  function md5ToUuid(md5String) {\n    const uuid = md5String.substr(0, 8) + '-' +\n                 md5String.substr(8, 4) + '-' +\n                 md5String.substr(12, 4) + '-' +\n                 md5String.substr(16, 4) + '-' +\n                 md5String.substr(20);\n    return uuid;\n  }\n\n  var uuid = java.randomUUID().toString().toUpperCase();\n  var androidId = java.androidId();\n  var deviceUUID = md5ToUuid(java.md5Encode(androidId)).toUpperCase();\n  // java.log(deviceUUID);\n  var time = Date.now();\n  var security = JSON.parse(java.ajax(`https://ikun.laoguantx.top:45554/sfapi/sign?uuid=${uuid}&time=${time}&deviceuuid=${deviceuuid}`)).data;\n  var header = {\n    \"user-agent\": `boluobao/5.0.60(android;29)/H5/${deviceUUID.toLowerCase()}/H5`,\n    sfsecurity: `nonce=${uuid}&timestamp=${time}&devicetoken=${deviceUUID}&sign=${security}`,\n    authorization: \"Basic YW5kcm9pZHVzZXI6MWEjJDUxLXl0Njk7KkFjdkBxeHE=\",\n    accept: \"application/vnd.sfacg.api+json;version=1\"\n  };\n  return header;\n}\n\nvar result = source.getLoginInfoMap()\njava.log(result)\nvar account = source.getLoginInfoMap().get('账号')\nvar password = source.getLoginInfoMap().get('密码')\n\nfunction login() {\n  java.toast(\"正在登录中，请等一会，很快就好...\")\n  java.getLoginHeader()\n  var options = {\n    body: JSON.stringify({\n      password: password,\n      shuMeiId: '',\n      username: account,\n    }),\n    method: 'POST',\n  }\n  var request = java.log (java.ajax(`https://api.sfacg.com/sessions,${JSON.stringify(options)}`))\n  if (JSON.parse(request).status.httpCode != 200) {\n    java.toast(JSON.parse(request).status.msg)\n    throw new Error(\"登录失败...\")\n  } else {\n    java.toast(\"欢迎，登录成功！\")\n    java.putLoginHeader(java.getCookie(\"sfacg.com\"))\n    cookie.removeCookie(\"sfacg.com\")\n  }\n}\n\nfunction _getYear() {\n  return new Date().getFullYear()\n}\n\nfunction getTodayDate() {\n  // format: 2020-12-31\n  return `${_getYear()}-${new Date().getMonth() + 1}-${new Date().getDate()}`\n}\n\nfunction buildsigninresultstr(data) {\n  let res = ''\n  data.forEach(i => {\n    res += `${i.name} * ${i.num}\\n`\n  })\n  return res.trim()\n}\n\nfunction checkin() {\n  let url = 'https://api.sfacg.com/user/newSignInfo'\n  var headers = getRequestHeader()\n  headers[\"cookie\"] = source.getLoginHeader()\n  let options = {\n    body: JSON.stringify({\n      signDate: getTodayDate(),\n    }),\n    headers: headers\n  }\n  let request = sendPutRequest(url, options.body, options.headers)\n  java.toast(request)\n  if (JSON.parse(request).status.httpCode != 200) {\n    java.toast(JSON.parse(request).status.msg)\n  } else {\n    java.toast('真棒，签到成功！\\n获得\\n' + buildsigninresultstr(JSON.parse(request).data))\n  }\n}\nfunction fakead() {\n  var headers = getRequestHeader()\n  headers[\"cookie\"] = source.getLoginHeader()\n  bodyRequestTask = sendPutRequest(\"https://api.sfacg.com/user/tasks/21/requirements\", `{\"num\":1}`, headers)\n  java.log(bodyRequestTask)\n  var headers = getRequestHeader()\n  headers[\"cookie\"] = source.getLoginHeader()\n  body = JSON.parse(sendPutRequest(\"https://api.sfacg.com/user/tasks/21\", \"\", headers))\n  java.log(JSON.stringify(body))\n  if (body.status.errorCode == 200) {\n    java.toast(\"看广告成功！\" + body.data.couponNum == 0 ? \"\" : (\"\\n代券 * \" + body.data.couponNum))\n  } else {\n    java.toast(\"看广告失败...\\n\" + body.data.msg)\n  }\n}\n\n</js>",
    "respondTime": 5965,
    "ruleBookInfo": {
      "author": "authorName",
      "coverUrl": "novelCover",
      "init": "<js>\nif (!String(baseUrl).includes(\"api.sfacg.com\")) {\n  baseUrl = `https://api.sfacg.com/novels/${String(baseUrl).match(\"\\\\d+\")[0]}?expand=latestchapter,chapterCount,typeName,intro,fav,ticket,pointCount,tags,sysTags,signlevel,discount,discountExpireDate,totalNeedFireMoney,originTotalNeedFireMoney`\n  result = java.ajax(baseUrl)\n}\nvar x = JSON.parse(result).data\nvar syst = []\nx.expand.sysTags.forEach((t) => {\n  syst.push(t.tagName)\n})\nx = {\n  novelName: x.novelName,\n  authorName: x.authorName,\n  typeName: [x.expand.typeName, String(x.point) + (String(x.point).includes(\".\") ? \"\" : \".0\"), x.isFinish ? \"完结\" : \"连载\", x.signStatus === \"普通\" ? [] : [x.signStatus], syst].join(\",\"),\n  charCount: x.charCount,\n  lastChapter: x.expand.latestChapter.title,\n  intro: `\n  ${(x.expand.discount != 1 && x.signStatus == \"VIP\") ? (\"您正享受本书的\" + String(x.expand.discount * 10).replace(\".0\", \"\") + \"折，折扣将于\" + x.expand.discountExpireDate.replace(\"T\", \" \") + \"结束\") : \"\"}\n  🔖 更新时间：${x.expand.latestChapter.addTime.replace(\"T\", \" \")}\n  &lrm;\n  🏷️ 简介： ${x.expand.intro.trim()}\n  &lrm;\n  🔖 开书时间：${x.addTime.replace(\"T\", \" \")}\n  ${(x.signStatus != \"普通\")\n  ? (\n      \"签约等级：\" + (\n        (x.expand.signLevel == \"normal\")\n        ? \"待上架\"\n        : x.expand.signLevel.replace(\"vip\", \"\") + \"级\"\n      )\n    )\n  : \"\"}\n  &lrm;\n  ${book.getVariable(\"custom\") == \"s\" ? \"🔗 分享链接: https://book.sfacg.com/Novel/\" + x.novelId : \"\"}\n  `\n  ,\n  novelCover: x.novelCover,\n  url: `https://api.sfacg.com/novels/${x.novelId}/dirs`,\n}\nx\n</js>",
      "intro": "intro",
      "kind": "typeName",
      "lastChapter": "lastChapter",
      "name": "novelName",
      "tocUrl": "url",
      "wordCount": "charCount"
    },
    "ruleContent": {
      "content": "<js>\nlet content = ''\nbody = JSON.parse(result)\ndata = body.data\nif (!data.expand.content && data.expand.chatLines.length !== 0) {\n  content = \"本章节为对话章节\\n================\\n\\u3000\\u3000\"\n  dataArr = data.expand.chatLines\n  dataArr.forEach(z => {\n    content +=\n      (z.avatar\n        ? z.charName\n          ? `<img src=\"${z.avatar}\",display=\"TEXT\">` +\n            z.charName +\n            ': ' +\n            (z.image ? `${z.content}\\n<img src=\"${z.image}\">` : z.content) +\n            '\\n'\n          : `<img src=\"${z.avatar}\",display=\"TEXT\">` +\n            (z.image ? `${z.content}\\n<img src=\"${z.image}\">` : z.content) +\n            '\\n'\n        : z.charName\n        ? z.charName + ': ' + (z.image ? `${z.content}\\n<img src=\"${z.image}\">` : z.content) + '\\n'\n        : z.image\n        ? `${z.content}\\n<img src=\"${z.image}\">`\n        : z.content + '\\n') + '================\\n'\n  })\n} else if (data.expand.content != '') {\n  let dArr = data.expand.content.split(\"\\n\")\n  dArr.forEach((line) => {\n    line = line.trim()\n    if (/\\[img=\\d+,\\d+\\](.*?)\\[\\/img\\]/.test(line)) {\n      content += `<img src=\"${line.match(/\\[img=\\d+,\\d+\\](.*?)\\[\\/img\\]/)[1]}\">\\n`\n    } else {\n      content += line + \"\\n\"\n    }\n  })\n} else {\n  java.log(\"付费章节\")\n  var moneyReq = JSON.parse(java.ajax(\"https://api.sfacg.com/user/money\"))\n  if (moneyReq.data != null) {\n    content = `未购买章节，请购买后刷新章节\\n你还有${moneyReq.data.fireMoneyRemain}火券\\n${moneyReq.data.couponsRemain}代券\\n购买本章需要${data.expand.needFireMoney}火券`\n  } else {\n    content = \"付费章节，请登录后查看\"\n  }\n}\n\nif (data.expand.isContentEncrypted && body.status.httpCode == 200 && data.expand.content) {\n  content = JSON.parse(sendPostRequest(\"https://ikun.laoguantx.top:45554/sfapi/contentdecrypt\", \"content=\" + java.encodeURI(content) + \"&cid=\" + body.data.chapId + \"&isVip=\" + body.data.isVip)).data\n}\n\ncontent\n</js>",
      "imageStyle": "<js>\njava.toast(result)\n\"TEXT\"\n</js>",
      "payAction": "var moneyReq = JSON.parse(java.ajax(\"https://api.sfacg.com/user/money\"))\nvar data = JSON.parse(java.ajax(baseUrl)).data\nif (data.isVip && data.expand.needFireMoney <= (moneyReq.data.fireMoneyRemain + moneyReq.data.couponsRemain)) {\n  java.toast(`\\n数据获取：\\nchapterId=${data.chapId}\\nnovelId=${data.novelId}`)\n  var chapId = parseInt(data.chapId)\n  payObj = java.ajax(`https://api.sfacg.com/novels/${data.novelId}/orderedchaps,{method:\"POST\",body:'{\"orderType\":\"readOrder\",\"orderAll\":false,\"autoOrder\":false,\"chapIds\":[${chapId}]}'}`)\n  // java.toast(payObj)\n  var res = JSON.parse(payObj)\n  if (res.status.errorCode == 200) {\n    var moneyReqNew = JSON.parse(java.ajax('https://api.sfacg.com/user/money'))\n    java.toast(`购买成功，请刷新章节\\n您目前剩余${moneyReqNew.data.fireMoneyRemain}火券，${moneyReqNew.data.couponsRemain}代券`)\n    true\n  } else if (res.status.errorCode == 671) {\n  \t  java.toast(\"章节已购买，请不要重复购买\")\n  \t  true\n    } else {\n    java.toast(\"购买失败: \" + payObj.data.msg)\n    false\n  }\n} else {\n  java.toast(\"您的余额不足，需要\" + data.needFireMoney + \"个火券，您还有\" + moneyReq.data.fireMoneyRemain + \"个火券，\" + moneyReq.data.couponsRemain + \"个代券\")\n  false\n}",
      "replaceRegex": "",
      "sourceRegex": "",
      "title": "$.data.title"
    },
    "ruleExplore": {
      "author": "authorName",
      "bookList": "<js>\nvar data = JSON.parse(result).data\n\nif (data == null || !data) {\n  throw new Error(\"无数据，请登录后查看\")\n} else if (data.newPush) {\n  java.log('handler: 使用newPush方法解析')\n  data = processNovels(data.newPush)\n} else if (data[0] != undefined && (data[0].novel != undefined || data[0].album != undefined)) {\n  java.log('handler: 使用标准方式解析')\n  data = processNovels(data)\n} else if (Array.isArray(data) && !data[0].expand.novels) {\n  java.log('handler: 使用排行榜方式解析')\n  data = processNovels(data)\n} else if (data[0].expand != undefined && data[0].expand.novels != undefined) {\n  java.log('handler: 使用火袋方式解析')\n  data = processNovels(data[0].expand.novels)\n}\n\nfunction processNovels(novels) {\n  var dArr = []\n  novels.forEach(x => {\n    if (x.novel) {\n      x = x.novel\n    }\n    if (!x.album) {\n      var syst = []\n      x.expand.sysTags.forEach((t) => {\n        syst.push(t.tagName)\n      })\n      dArr.push({\n        novelName: x.novelName,\n        authorName: x.authorName,\n        typeName: [x.expand.typeName, String(x.point) + (String(x.point).includes(\".\") ? \"\" : \".0\"), x.isFinish ? \"完结\" : \"连载\", x.signStatus === \"普通\" ? [] : [x.signStatus], syst].join(\",\"),\n        charCount: x.charCount,\n        lastChapter: x.expand.latestChapter.title,\n        intro: x.expand.intro,\n        novelCover: x.novelCover,\n        bookUrl: `https://api.sfacg.com/novels/${x.novelId}?expand=latestchapter,chapterCount,typeName,intro,fav,ticket,pointCount,tags,sysTags,signlevel,discount,discountExpireDate,totalNeedFireMoney,originTotalNeedFireMoney`,\n      })\n    }\n  })\n  return dArr\n}\n\ndata\n</js>",
      "bookUrl": "bookUrl",
      "coverUrl": "novelCover",
      "intro": "intro",
      "kind": "typeName",
      "lastChapter": "lastChapter",
      "name": "novelName",
      "wordCount": "charCount"
    },
    "ruleSearch": {
      "author": "authorName",
      "bookList": "<js>\nvar data = JSON.parse(result).data\n// java.log(JSON.stringify(data))\nif (data.novels != undefined) {\n  var dArr = []\n  data.novels.forEach(x => {\n    var syst = []\n    x.expand.sysTags.forEach((t) => {\n      syst.push(t.tagName)\n    })\n    dArr.push({\n      novelName: x.novelName,\n      authorName: x.authorName,\n      typeName: [x.expand.typeName, String(x.point) + (String(x.point).includes(\".\") ? \"\" : \".0\"), x.isFinish ? \"完结\" : \"连载\", x.signStatus === \"普通\" ? [] : [x.signStatus], syst].join(\",\"),\n      charCount: x.charCount,\n      lastChapter: x.expand.latestChapter.title,\n      intro: x.expand.intro,\n      novelCover: x.novelCover,\n      bookUrl: `https://api.sfacg.com/novels/${x.novelId}?expand=latestchapter,chapterCount,typeName,intro,fav,ticket,pointCount,tags,sysTags,signlevel,discount,discountExpireDate,totalNeedFireMoney,originTotalNeedFireMoney`,\n    })\n  })\n  data = dArr\n  // java.log(JSON.stringify(data))\n}\ndata\n</js>",
      "bookUrl": "bookUrl",
      "checkKeyWord": "原神",
      "coverUrl": "novelCover",
      "intro": "intro",
      "kind": "typeName",
      "lastChapter": "lastChapter",
      "name": "novelName",
      "wordCount": "charCount"
    },
    "ruleToc": {
      "chapterList": "<js>var data = JSON.parse(result).data\nvar cArr = []\ndata.volumeList.forEach((v) => {\n  cArr.push({\n    title: v.title,\n    isVolume: true,\n    url: \"\",\n    isVip: false,\n    isBuy: false,\n  })\n  v.chapterList.forEach((c) => {\n    // java.log(c.needFireMoney == 0 && c.isVip)\n    cArr.push({\n      title: (c.isVip && c.needFireMoney == 0 ? \"✿·\" : \"\") + c.title,\n      update: (c.updateTime ? c.updateTime.replace(\"T\", \" \") : c.AddTime.replace(\"T\", \" \")) + `, ${c.charCount}字`,\n      isVolume: false,\n      url: `https://api.sfacg.com/Chaps/${c.chapId}?expand=content,needFireMoney,originNeedFireMoney,tsukkomi,chatlines,isbranch,isContentEncrypted,authorTalk&autoOrder=false`,\n      isBuy: c.needFireMoney == 0,\n      isVip: c.isVip && c.needFireMoney != 0,\n    })\n  })\n})\ncArr\n</js>",
      "chapterName": "title",
      "chapterUrl": "url",
      "isPay": "isBuy",
      "isVip": "isVip",
      "isVolume": "isVolume",
      "updateTime": "update"
    },
    "searchUrl": "/search/novels/result/new?q={{key}}&expand=novels,typeName,tags,intro,latestchapter,discount,discountExpireDate,sysTags&sort=hot&page={{ page - 1 }}&size=12&systagids=&isFinish=-1&updateDays=-1",
    "weight": 0
  }
]
